
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Leitor de Fundo ANBIMA</title>
</head>
<body>
    <h1>Leitor de Fundo ANBIMA - XML 5.0</h1>
    <input type="file" id="upload" accept=".xml">
    <pre id="output">Carregue um XML para ver os dados do fundo...</pre>
    <script>
    document.getElementById('upload').addEventListener('change', function (e) {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function (evt) {
            const text = evt.target.result;
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(text, "application/xml");

            const ns = "urn:iso:std:iso:20022:tech:xsd:semt.003.001.04";

            const nome = xmlDoc.getElementsByTagNameNS(ns, "Desc")[0]?.textContent || "NÃ£o encontrado";
            const cnpj = xmlDoc.getElementsByTagNameNS(ns, "Id")[1]?.textContent || "NÃ£o encontrado";
            const pl = xmlDoc.getElementsByTagNameNS(ns, "TtlHldgsValOfStmt")[0]?.getElementsByTagNameNS(ns, "Amt")[0]?.textContent || "0";

            document.getElementById("output").textContent =
                "ðŸ“„ Nome do Fundo: " + nome + "\n" +
                "ðŸ†” CNPJ: " + cnpj + "\n" +
                "ðŸ’° PatrimÃ´nio LÃ­quido: R$ " + pl + "\n\n" +
                "âœ… Estresse (simulado):\n" +
                "â€¢ Selic +1%: R$ -" + (parseFloat(pl) * 0.015).toFixed(2) + "\n" +
                "â€¢ DÃ³lar +10%: R$ -" + (parseFloat(pl) * 0.01).toFixed(2) + "\n" +
                "â€¢ Bolsa -10%: R$ -" + (parseFloat(pl) * 0.05).toFixed(2);
        };
        reader.readAsText(file);
    });
    </script>
</body>
</html>
